# 무료 체험판 계정에서 ApiProjectMapError 해결 방법

## 현재 상황

✅ **확인된 사항:**
- 결제 계정: 무료 체험판 계정 (크레딧 ₩441,614, 90일 남음)
- Maps JavaScript API: 활성화됨
- API 키 제한 설정: 올바르게 설정됨

❌ **문제:**
- 지도에 "Google 지도를 제대로 로드할 수 없습니다" 오류 표시
- 콘솔에 `ApiProjectMapError` 발생
- 지도에 "For development purposes only" 워터마크 표시

## 해결 방법

### 1. 결제 수단 등록 확인 (가장 중요!)

무료 체험판 계정이라도 **결제 수단(신용카드 등)이 등록되어 있어야** Google Maps API가 정상 작동합니다.

**확인 방법:**
1. Google Cloud Console에서 **"결제" > "결제 수단"** 메뉴로 이동
2. 결제 수단이 등록되어 있는지 확인
3. 등록되어 있지 않다면:
   - **"결제 수단 추가"** 클릭
   - 신용카드 또는 기타 결제 수단 등록
   - **중요**: 무료 체험판 기간 중에는 실제로 요금이 청구되지 않습니다

**참고**: 
- 무료 체험판 크레딧이 남아있으면 요금이 청구되지 않습니다
- 크레딧이 소진되어도 자동으로 결제되지 않도록 예산 알림을 설정할 수 있습니다

### 2. 프로젝트 상태 확인

무료 체험판 계정이 만료되거나 제한이 걸려있을 수 있습니다.

**확인 방법:**
1. Google Cloud Console 상단의 배너 확인
   - "90일 후에는 모든 무료 체험판 리소스를 사용할 수 없게 됩니다" 메시지가 보임
   - 이는 정상이며, 아직 90일이 남았으므로 문제 없습니다
2. **"결제" > "개요"** 메뉴에서:
   - "무료 체험판 계정" 상태 확인
   - 크레딧 잔액 확인 (₩441,614 남음)

### 3. API 키 확인

API 키가 올바른 프로젝트에서 생성되었는지 확인:

1. **"API 및 서비스" > "사용자 인증 정보"** 메뉴로 이동
2. API 키 클릭
3. **"키 표시"** 버튼 클릭하여 전체 API 키 확인
4. `.env.local` 파일의 키와 비교:
   ```env
   NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=여기에_API_키_입력
   ```

### 4. Maps JavaScript API 할당량 확인

무료 체험판 계정에서도 할당량이 제한될 수 있습니다.

**확인 방법:**
1. **"API 및 서비스" > "사용 설정된 API 및 서비스"** 메뉴로 이동
2. **"Maps JavaScript API"** 클릭
3. **"할당량"** 탭 확인
4. 할당량이 초과되지 않았는지 확인

### 5. 프로젝트 활성화 확인

프로젝트가 활성화되어 있는지 확인:

1. Google Cloud Console 상단에서 프로젝트 선택
2. 프로젝트 이름이 "onepiece"인지 확인
3. 프로젝트 상태가 "활성"인지 확인

## 단계별 해결 체크리스트

- [ ] **결제 수단 등록** (가장 중요!) ⚠️
- [ ] API 키가 올바른 프로젝트에서 생성되었는지 확인
- [ ] `.env.local` 파일의 API 키가 Google Cloud Console의 키와 일치하는지 확인
- [ ] Maps JavaScript API 할당량 확인
- [ ] 프로젝트 활성화 상태 확인
- [ ] 설정 변경 후 5-10분 대기
- [ ] 브라우저 하드 리프레시 (Ctrl+Shift+R)
- [ ] 프론트엔드 서버 재시작

## 예상되는 문제

### "For development purposes only" 워터마크

이 워터마크가 표시되는 이유:
1. **결제 수단이 등록되지 않음** (가장 흔한 원인)
2. API 키가 제한되어 있지만 올바르게 설정되지 않음
3. 프로젝트가 무료 체험판 상태이지만 결제 수단이 없음

### ApiProjectMapError

이 오류가 발생하는 이유:
1. 결제 수단이 등록되지 않아서 API가 완전히 활성화되지 않음
2. 프로젝트 설정이 완료되지 않음
3. API 키가 올바른 프로젝트에 속하지 않음

## 중요 참고사항

### 무료 체험판과 결제 수단

- 무료 체험판 기간 중에는 **실제로 요금이 청구되지 않습니다**
- 크레딧(₩441,614)이 남아있으면 크레딧에서 차감됩니다
- 크레딧이 소진되어도 자동으로 결제되지 않도록 예산 알림을 설정할 수 있습니다
- 하지만 **결제 수단 등록은 필수**입니다

### 예산 알림 설정 (선택사항)

결제 수단을 등록한 후 예산 알림을 설정하여 예상치 못한 요금을 방지할 수 있습니다:

1. **"결제" > "예산 및 알림"** 메뉴로 이동
2. **"예산 만들기"** 클릭
3. 예산 금액 설정 (예: ₩10,000)
4. 알림 설정 (예: 예산의 50%, 90%, 100% 도달 시)

## 다음 단계

1. **가장 먼저**: 결제 수단 등록 확인 및 추가
2. 결제 수단 등록 후 5-10분 대기
3. 브라우저 하드 리프레시 (Ctrl+Shift+R)
4. 콘솔에서 오류 확인

---

**참고**: 결제 수단을 등록하면 "For development purposes only" 워터마크가 사라지고 지도가 정상적으로 작동합니다.



